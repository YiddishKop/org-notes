<p>
Countless build tools and shell scripts use ANSI escape codes to colorize their
output. This provides impressive improvements to readability when running from a
terminal that supports them, but tends to cause a catastrophic mess anywhere
else. Emacs’ compilation buffer is one such place. It doesn’t support ANSI
colors by default, but that’s very easy to fix.
</p>

<p>
Emacs already has a library for interpreting ANSI escape. All we need is to hook
it onto <code>compilation-mode</code>.
</p>
<figure class="highlight"><pre><code class="language-cl" data-lang="cl"><span class="p">(</span><span class="nb">require</span> <span class="ss">'ansi-color</span><span class="p">)</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">endless/colorize-compilation</span> <span class="p">()</span>
  <span class="s">"Colorize from `compilation-filter-start' to `point'."</span>
  <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">inhibit-read-only</span> <span class="no">t</span><span class="p">))</span>
    <span class="p">(</span><span class="nv">ansi-color-apply-on-region</span>
     <span class="nv">compilation-filter-start</span> <span class="p">(</span><span class="nv">point</span><span class="p">))))</span>

<span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'compilation-filter-hook</span>
          <span class="nf">#'</span><span class="nv">endless/colorize-compilation</span><span class="p">)</span></code></pre></figure>

   <p><a href="http://endlessparentheses.com/ansi-colors-in-the-compilation-buffer-output.html?source=rss#disqus_thread">Comment on this.</a></p>
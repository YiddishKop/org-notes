
            

            <p>Colored syntax highlighting of code blocks in <code>.org</code> files works well when executed through the main <code>init.el</code> file. However, when setting up Emacs and Org-mode to publish project <strong>asynchronously</strong> colored synatax highlighting is not present and only bold and underlined formatting is used.</p>

<p>I have the following minimal example:</p>

<h2>init.el</h2>

<pre><code>(add-to-list 'load-path "~/.emacs.d/modes/org-mode-8.2.10/lisp")
(add-to-list 'load-path "~/.emacs.d/modes/htmlize-1.6.1/")
(require 'org) 
(require 'htmlize)

(setq org-src-fontify-natively t)    

(setq org-publish-project-alist
      '(
        ("prj"
         :base-directory "~/tmp/org-export-test/"
         :base-extension "org"
         :publishing-directory "~/tmp/org-export-pub/"
         :recursive t
         :publishing-function org-html-publish-to-html
         )))

;; async export options
(setq org-export-async-debug t)
(setq org-export-async-init-file
      (expand-file-name "export-async-init-file.el"
            (file-name-directory user-init-file)))

(global-set-key (kbd "C-c C-8")
                (lambda () (interactive) (org-publish "prj")))
;;      (lambda () (interactive) (org-publish "prj" :ASYNC t)))
</code></pre>

<h2>export-async-init-file.el</h2>

<pre><code>(add-to-list 'load-path "~/.emacs.d/modes/org-mode-8.2.10/lisp")
(add-to-list 'load-path "~/.emacs.d/modes/htmlize-1.6.1/")
(require 'org) 
(require 'htmlize)

(setq org-src-fontify-natively t)

(setq org-export-async-debug t)
</code></pre>

<h2>Org file in the project folder</h2>

<pre><code>Hello world example code:

#+BEGIN_SRC python
def hello_world(name):
    print(name)
#+END_SRC

The above should be colored and highlighted.
</code></pre>

<p>In the above settings I get </p>

<p><a href="https://i.stack.imgur.com/uUNVs.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/uUNVs.png" alt="enter image description here"></a></p>

<p>When switching on the asynchronous export however (switching the comment on the last two lines of <code>init.el</code>), I get</p>

<p><a href="https://i.stack.imgur.com/U8T2O.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/U8T2O.png" alt="enter image description here"></a></p>

<p>How can I set up the above configuration to get color highlighting in asynchronous export as well?</p>

<p>(Note: While I would like to make colored syntax highlighting work in Org-mode 8.2.10, I have also tried the above example with the latest Org-mode 9.0.5 and have found the same behavior.)</p>

        
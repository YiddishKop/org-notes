<p>I am just getting settled in with <a href="http://orgmode.org">Org Mode</a> for Emacs and am constantly amazed at its versatility and wide feature set. One problem has been bugging me in Org for quite a while now, though: <code class="highlighter-rouge">electric-indent-mode</code>, which I use for auto-indentation when programming, gets in the way by auto-indenting Org headers.</p>

<p>My annoyance reached a critical point earlier this morning, and so I set off in search of a fix to disable electric indenting &ldquo;mode-locally&rdquo; &mdash; that is, disable the mode in Org buffers but not in buffers of any other mode. The catch with <code class="highlighter-rouge">electric-indent-mode</code> is that it is a global minor mode &mdash; something that is enabled once and assumed to be necessary for all buffers.</p>

<p>After a bit of searching, however, I was glad to find that the author of the mode had left in a backdoor for customizing its functionality. Meet <code class="highlighter-rouge">electric-indent-functions</code>:</p>

<blockquote>
  <p>Special hook run to decide whether to auto-indent.
Each function is called with one argument (the inserted char), with point right after that char, and it should return t to cause indentation, `no-indent&rsquo; to prevent indentation or nil to let other functions decide.</p>
</blockquote>

<p>Perfect! The default value for this variable (as of Emacs 24.0.92.1) is <code class="highlighter-rouge">nil</code>, so I made the choice to recklessly overwrite this variable at a <a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Locals.html">buffer-local level</a>.</p>

<p>Enough technoblabber; here&rsquo;s the fix. Add the following code into an Emacs Lisp file that gets run on initialization:</p>

<figure class="highlight"><pre><code class="language-cl" data-lang="cl"><span class="p">(</span><span class="nv">add-hook</span> <span class="ss">'org-mode-hook</span>
          <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
            <span class="p">(</span><span class="nb">set</span> <span class="p">(</span><span class="nv">make-local-variable</span> <span class="ss">'electric-indent-functions</span><span class="p">)</span>
                 <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="k">lambda</span> <span class="p">(</span><span class="nv">arg</span><span class="p">)</span> <span class="ss">'no-indent</span><span class="p">)))))</span></code></pre></figure>

<p>You can find the latest version of my Org mode config in my <a href="https://github.com/hans/dotfiles/blob/master/emacs.d/scripts/org.el"><code class="highlighter-rouge">dotfiles</code> repo</a>.</p><img src="http://feeds.feedburner.com/~r/foldl/rss/~4/xvC40g1knFc" height="1" width="1" alt=""/>